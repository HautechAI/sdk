#!/bin/bash

# This script generates TypeScript code from the Hautech API
# 
# Usage:
#   ./scripts/generate.sh [API_URL]
#   npm run generate [-- API_URL]
#
# Examples:
#   ./scripts/generate.sh                           # Uses default API URL
#   ./scripts/generate.sh https://custom-api.com    # Uses custom API URL
#   npm run generate                                # Uses default API URL
#   npm run generate -- https://custom-api.com      # Uses custom API URL
#
# Use the first argument as API_URL if provided, otherwise use the default
API_URL=${1:-"https://api.hautech.ai"}

./node_modules/.bin/openapi-generator-cli generate -i $API_URL/swagger.json -g typescript-axios -o ./src/autogenerated
node ./scripts/generate-permissions.js $API_URL/v1/permissions/available ./src/autogenerated/permissions.ts
